<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>js动画</title>
</head>
<body>
<div id="myDiv" style="background-color: lightblue;width: 0;height: 20px;line-height: 20px;">0%</div>
<button id="btn">run</button>
<script>
	var timer;
	var btn = document.querySelector("#btn");
	var myDiv = document.querySelector("#myDiv");
	btn.onclick = function(){
		myDiv.style.width = '0';
		cancelAnimationFrame(timer);
		timer = requestAnimationFrame(function fn(){
			if(parseInt(myDiv.style.width) < 500){
				myDiv.style.width = parseInt(myDiv.style.width) + 5 + 'px';
				myDiv.innerHTML =     parseInt(myDiv.style.width)/5 + '%';
				timer = requestAnimationFrame(fn);
			}else{
				cancelAnimationFrame(timer);
			}
		});
	}
</script>
</body>
</html>